<!DOCTYPE html>
<html>
<head>
	<title>Home</title>
	<style>
	.navbar {
		overflow: hidden;
		background-color: #8B2332;
	}
	.navbar a {
		display: inline-block;
		color: #8B6F4B;
		text-align: center;
		padding: 14px 16px;
		font-size: 20px;
	}
	.navbar a:hover {
		background-color: #8B6F4B;
		color: black;
	}
	.navbar a:active {
		background-color: #8B6F4B;
		color: black;
	}
	.image {
		float: left;
		display: inline-block;
	}

	#fileButton {
		float:right;
	}
	</style>
</head>
<body>
	<div class="image">
		<img src="../Images/tempicon.png">
	</div>
	<div class="navbar">
		<a class="active" href="studentHome.html">Home</a>
		<a href="studentContactInfo.html">Contact Info</a>
		<a href="studentMessage.html">Message Team</a>
		<a href="studentAccount.html">Account</a>
	</div>
	<div style="margin-left: 225px">
		<h1> Team Files </h1>
		<fieldset style="float:right;">
			<legend> Upload File </legend>
		<input type="file" id="fileButton" style="float:right"/>
	</fieldset>
		<form action="Editor.html">
			<fieldset style="float:right;">
				<legend> Create New File </legend>
				<input type="submit" value="Create" />
			</fieldset>
		</form>
		<table id="fileNames" cellpadding="10">
		</table>
	</div>
	<!--The following code was generated by Firebase in order to upload it to our storage there -->
</fieldset>
	<script src="https://www.gstatic.com/firebasejs/3.7.0/firebase.js"></script>
	<script>
	// Initialize Firebase
	var config = {
		apiKey: "AIzaSyDfBsx-cINFNm1qhEwCP80gEmmEc5rvSnw",
		authDomain: "softwareengineeringproje-be6d0.firebaseapp.com",
		databaseURL: "https://softwareengineeringproje-be6d0.firebaseio.com",
		projectId: "softwareengineeringproje-be6d0",
		storageBucket: "softwareengineeringproje-be6d0.appspot.com",
		messagingSenderId: "350274872134"
	};
	firebase.initializeApp(config);
</script>
<!--The following code for the choose file and upload file was obtained from https://community.thunkable.com/t/uploading-files-to-firebase/1916 -->
<script>
var fileButton = document.getElementById("fileButton");
var i = 0;
fileButton.addEventListener('change', function(e){
	var file = e.target.files[0];
	var storageRef = firebase.storage().ref(file.name);

	storageRef.put(file);
	var list = document.getElementById('fileNames');
	var a = document.createElement('a');
	var link = "https://firebasestorage.googleapis.com/v0/b/softwareengineeringproje-be6d0.appspot.com/o/" + file.name + "?alt=media&token=23a50f35-7cbc-4006-95a3-605197e5fef9";
	a.href = link;
	a.innerHTML = "Download";

	var feedbackButton = document.createElement('a');
	feedbackButton.href = "feedback.html?a=#" + file.name;
	var button = document.createElement('input');
	button.type = 'button';
	button.value = "Add Feedback";
	feedbackButton.appendChild(button);

	localStorage.setItem("#" + file.name, link);

	var row = list.insertRow(i);
	var name = row.insertCell(0);
	var download = row.insertCell(1);
	var feedback = row.insertCell(2);
	var grade = row.insertCell(3);

	name.innerHTML = file.name;
	download.appendChild(a);
	feedback.appendChild(feedbackButton);

	var br = document.createElement('br');
	i = i+1;
});
</script>
<!--End code from thunkable -->


</body>
</html>
